# Roadmap для Flagus

### MVP 1.1: Ядро системы

**Цель:** Рабочее ядро с базовым управлением флагами

- **Инфраструктура**

  - [ ] Минимальный Docker-образ (Node.js + SQLite)
  - [ ] Настройка Fastify
  - [ ] Двойное хранилище: SQLite (постоянное) + In-Memory (кэш)

- **Управление флагами**

  - [ ] CRUD API с валидацией:
    - Имя флага (unique)
    - Описание флага (опц.)
    - Типы: boolean/percentage
    - Метаданные (автор, дата создания)
  - [ ] Toggle-механизм с версионированием

- **UI**
  - [ ] Dashboard с:
    - Списком флагов (поиск, сортировка)
    - Индикатором статуса (активен/неактивен)
    - Быстрым переключением
  - [ ] Форма создания флага:
    - Валидация полей
    - Предпросмотр правил

### MVP 1.2: Жизненный цикл флагов

**Цель:** Автоматизация управления флагами

- [ ] Временные правила:
  - Временные ограничения (start/end datetime)
  - Автоотключение по расписанию
  - Self-delete через 30 дней неактивности
- [ ] Категории:
  - [ ] Древовидная структура (max глубина 3)
  - [ ] Валидация циклов
  - [ ] Фильтры по категориям в UI
- [ ] Клиентская интеграция:
  - [ ] Long polling (интервал 15-60 сек)
  - [ ] Механизм client-id:
    - Автогенерация при первом запросе
    - Хранение в localStorage

### MVP 1.3: Безопасность и аналитика

**Цель:** Готовность к production

- **Безопасность**

  - [ ] JWT с ролями:
    - Admin (полный доступ)
    - Editor (только редактирование)
    - Viewer (read-only)
  - [ ] Audit log:
    - История изменений флагов
    - Экспорт в CSV

- **A/B тестирование**

  - [ ] Графическое представление распределения
  - [ ] Статистика активаций
  - [ ] Валидация перекрытия правил

- **Механизм тестировщиков**

  - [ ] Временные ограничения для тестировщиков
  - [ ] Выдачи прав по IP
  - [ ] Автоматический аудит действий тестировщиков

- **UI улучшения**
  - [ ] Визуальный редактор правил:
    - Timeline для временных ограничений
    - Drag-n-drop для процентных диапазонов
  - [ ] Дифф-просмотр изменений конфига

### MVP 2: Экосистема

**Цель:** Интеграция с внешними системами

- [ ] Вебхуки:
  - События: create/update/delete/toggle
  - Retry policy (3 попытки)
  - Подтверждение доставки
- [ ] Конфигурация:
  - [ ] Экспорт с зависимостями (включая категории)
  - [ ] Schema validation через JSON Schema
  - [ ] Автоверсионирование (семантическое)
- [ ] Документация
  - [ ] Swagger для API
  - [ ] Quickstart-гайд
  - [ ] Troubleshooting-чеклист
